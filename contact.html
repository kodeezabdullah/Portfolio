<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact | Get In Touch</title>
  <meta name="description" content="Contact form and direct links to reach a Web GIS Developer & Spatial Analyst." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/styles.css" />
  <style>
    .form-status {
      padding: 12px 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      font-weight: 600;
      display: none;
    }
    .form-status.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .form-status.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    .form-status.loading {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
    }
    .input.error {
      border-color: #dc3545;
      box-shadow: 0 0 0 4px rgba(220, 53, 69, 0.12);
    }
    .error-message {
      color: #dc3545;
      font-size: 0.9rem;
      margin-top: 4px;
      display: none;
    }
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    .btn:disabled:hover {
      transform: none;
      box-shadow: var(--shadow-sm);
    }
  </style>
</head>
<body class="page-enter">
  <a class="skip-link" href="#main">Skip to content</a>

  <header class="header" role="banner">
    <div class="container navbar" aria-label="Primary">
      <a href="index.html" class="brand" aria-label="Home">
        <img src="assets/profile.jpg" alt="Muhammad Abdullah" class="avatar" />
        <span><span class="text-gradient">Muhammad Abdullah</span> ‚Äî WebGIS Developer & GIS Analyst</span>
      </a>
      <nav class="nav" role="navigation">
        <a href="index.html">Home</a>
        <a href="portfolio.html">Portfolio</a>
        <a href="services.html">Services</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
      <button class="menu-toggle" aria-label="Toggle menu" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
    </div>
  </header>

  <main id="main" tabindex="-1">
    <section class="section">
      <div class="container">
        <h1>Contact</h1>
        <div class="grid cols-2">
          <form id="contact-form" action="https://formspree.io/f/mgvlpwkv" method="POST" class="card bordered" style="padding:18px;background:#fff;" aria-label="Contact form">
            <div id="form-status" class="form-status"></div>
            
            <label for="name">Name *</label>
            <input id="name" name="name" class="input" required />
            <div class="error-message" id="name-error">Please enter your name</div>
            <div class="spacer-sm"></div>
            
            <label for="email">Email *</label>
            <input id="email" name="email" type="email" class="input" required />
            <div class="error-message" id="email-error">Please enter a valid email address</div>
            <div class="spacer-sm"></div>
            
            <label for="subject">Subject</label>
            <input id="subject" name="subject" class="input" />
            <div class="spacer-sm"></div>
            
            <label for="message">Message *</label>
            <textarea id="message" name="message" class="input textarea" required placeholder="Tell me about your project or how I can help..."></textarea>
            <div class="error-message" id="message-error">Please enter your message</div>
            <div class="spacer-sm"></div>
            
            <button class="btn accent" type="submit" id="submit-btn">
              <span id="btn-text">Send Message</span>
            </button>
          </form>
          
          <div>
            <h3>Let's Work Together</h3>
            <p class="muted">Have a GIS project in mind? Whether it's web mapping, spatial analysis, or custom geospatial solutions, I'm here to help bring your ideas to life.</p>
            <div class="spacer-sm"></div>
            <p><strong>Response Time:</strong> Usually within 3 hours</p>
            <p><strong>Project Types:</strong> Web GIS, Spatial Analysis, Remote Sensing</p>

            
            <div class="spacer-md"></div>
            
            <div class="card bordered" style="height: 300px; padding: 0; overflow: hidden;">
              <div id="map" style="width: 100%; height: 100%;"></div>
            </div>
            <p class="muted" style="margin-top: 8px; font-size: 0.9rem; text-align: center;">üìç Nust, H-12, Islamabad</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer" role="contentinfo">
    <div class="container top">
      <div class="grid cols-3">
        <div>
          <h3>Social</h3>
          <p class="socials">
            <a href="https://www.linkedin.com/in/muhammadabdullah-gisengineer" target="_blank" rel="noopener"><img src="assets/icons/linkedin.svg" alt="LinkedIn" width="20" height="20" />LinkedIn</a>
            <a href="https://github.com/kodeezabdullah" target="_blank" rel="noopener"><img src="assets/icons/github.svg" alt="GitHub" width="20" height="20" />GitHub</a>
          </p>
        </div>
        <div>
          <h3>Links</h3>
          <p><a href="portfolio.html">Portfolio</a></p>
          <p><a href="services.html">Services</a></p>
          <p><a href="about.html">About</a></p>
          <p><a href="contact.html">Contact</a></p>
        </div>
        <div>
          <h3>Contact</h3>
          <p><a href="mailto:abdullah.gis.services@gmail.com"><img src="assets/icons/gmail.svg" alt="Gmail" width="20" height="20" />abdullah.gis.services@gmail.com</a></p>
        </div>
      </div>
    </div>
    <div class="container bottom">¬© <span id="year"></span> Muhammad Abdullah. All rights reserved.</div>
  </footer>

  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
  <script src="js/main.js" defer></script>
  
  <!-- Mapbox GL JS -->
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css' rel='stylesheet' />
  
  <script>
    // Enhanced form handling
    (function() {
      const form = document.getElementById('contact-form');
      const statusDiv = document.getElementById('form-status');
      const submitBtn = document.getElementById('submit-btn');
      const btnText = document.getElementById('btn-text');
      
      // Form validation
      function validateField(field) {
        const value = field.value.trim();
        const fieldName = field.name;
        let isValid = true;
        let errorMsg = '';
        
        // Remove existing error state
        field.classList.remove('error');
        document.getElementById(fieldName + '-error').style.display = 'none';
        
        // Validation rules
        if (field.required && !value) {
          isValid = false;
          errorMsg = `Please enter your ${fieldName}`;
        } else if (fieldName === 'email' && value) {
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(value)) {
            isValid = false;
            errorMsg = 'Please enter a valid email address';
          }
        }
        
        // Show error if invalid
        if (!isValid) {
          field.classList.add('error');
          const errorElement = document.getElementById(fieldName + '-error');
          if (errorElement) {
            errorElement.textContent = errorMsg;
            errorElement.style.display = 'block';
          }
        }
        
        return isValid;
      }
      
      // Show status message
      function showStatus(type, message) {
        statusDiv.className = `form-status ${type}`;
        statusDiv.textContent = message;
        statusDiv.style.display = 'block';
        statusDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
      
      // Hide status message
      function hideStatus() {
        statusDiv.style.display = 'none';
      }
      
      // Real-time validation
      ['name', 'email', 'message'].forEach(fieldName => {
        const field = document.getElementById(fieldName);
        if (field) {
          field.addEventListener('blur', () => validateField(field));
          field.addEventListener('input', () => {
            if (field.classList.contains('error')) {
              validateField(field);
            }
          });
        }
      });
      
      // Form submission
      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        hideStatus();
        
        // Validate all required fields
        const nameField = document.getElementById('name');
        const emailField = document.getElementById('email');
        const messageField = document.getElementById('message');
        
        const isNameValid = validateField(nameField);
        const isEmailValid = validateField(emailField);
        const isMessageValid = validateField(messageField);
        
        if (!isNameValid || !isEmailValid || !isMessageValid) {
          showStatus('error', 'Please fix the errors above and try again.');
          return;
        }
        
        // Show loading state
        submitBtn.disabled = true;
        btnText.textContent = 'Sending...';
        showStatus('loading', 'Sending your message...');
        
        try {
          const formData = new FormData(form);
          const response = await fetch(form.action, {
            method: 'POST',
            body: formData,
            headers: {
              'Accept': 'application/json'
            }
          });
          
          if (response.ok) {
            showStatus('success', 'Thank you! Your message has been sent successfully. I\'ll get back to you within 24 hours.');
            form.reset();
          } else {
            throw new Error('Form submission failed');
          }
        } catch (error) {
          showStatus('error', 'Sorry, there was an error sending your message. Please try again or contact me directly at abdullah.gis.services@gmail.com');
        } finally {
          // Reset button state
          submitBtn.disabled = false;
          btnText.textContent = 'Send Message';
        }
      });
    })();

    // Initialize Mapbox map
    (function() {
      // You'll need to replace this with your actual Mapbox access token
      mapboxgl.accessToken = 'pk.eyJ1IjoiYWJkdWxsYWhwYiIsImEiOiJjbWU1ZW41aG4wazk1MmpxdHYwdTNtdmFqIn0.WzIAD3hZ88i9C4o66bDtiw';
      
      try {
        const map = new mapboxgl.Map({
          container: 'map',
          style: 'mapbox://styles/mapbox/streets-v11',
          center: [72.9922, 33.6442], // Longitude, Latitude for H-12, Islamabad
          zoom: 14
        });

        // Add marker for your location
        const marker = new mapboxgl.Marker({
          color: '#FF6B35' // Your theme orange color
        })
        .setLngLat([72.98568, 33.6431])
        .setPopup(new mapboxgl.Popup().setHTML('<strong>Nust</strong><br>H-12, Islamabad'))
        .addTo(map);

        // Add navigation controls
        map.addControl(new mapboxgl.NavigationControl());
        
      } catch (error) {
        // Fallback if Mapbox fails to load
        document.getElementById('map').innerHTML = '<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: #666;"><p>üìç Rahmat Hostel, H-12, Islamabad<br><small>Interactive map requires Mapbox token</small></p></div>';
      }
    })();
  </script>
</body>
</html>